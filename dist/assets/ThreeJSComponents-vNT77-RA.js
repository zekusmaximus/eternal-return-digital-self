import{j as t,a as C,C as f,O as b,b as L,c as E}from"./three-vendor-B0HHzWfL.js";import{N as w,C as S}from"./node-view-CKzL31Pm.js";import{b as c}from"./react-vendor-DaKsb8LL.js";import"./constellation-D77L-avc.js";const v=r=>r.map(e=>({start:e.source,end:e.target})),O=({onWebGLError:r})=>{const{gl:e}=E(),[o,a]=c.useState(!1);return c.useEffect(()=>{if(!e.domElement)return;const l=n=>{console.error("[ThreeJS] WebGL context lost",n),a(!0),n.preventDefault(),r&&r(new Error("WebGL context lost"))},s=n=>{console.log("[ThreeJS] WebGL context restored",n),a(!1)};return e.domElement.addEventListener("webglcontextlost",l),e.domElement.addEventListener("webglcontextrestored",s),()=>{e.domElement.removeEventListener("webglcontextlost",l),e.domElement.removeEventListener("webglcontextrestored",s)}},[e,r]),o?t.jsx("group",{children:t.jsxs("mesh",{position:[0,0,-5],children:[t.jsx("planeGeometry",{args:[10,2]}),t.jsx("meshBasicMaterial",{color:"red",transparent:!0,opacity:.8})]})}):null},B=()=>{const{gl:r}=E(),e=c.useRef(null);return c.useEffect(()=>{try{r.getContext().getExtension("WEBGL_lose_context")}catch(o){console.warn("[ThreeJS] Could not get WebGL extension:",o)}return e.current&&(clearInterval(e.current),e.current=null),()=>{e.current&&(clearInterval(e.current),e.current=null)}},[r]),null},_=({nodes:r,nodePositions:e,connections:o,mappedConnections:a,instancedMeshRef:l,onWebGLContextCreated:s,onWebGLError:n,isInitialChoicePhase:m,triumvirateActive:x,triumvirateNodes:p,positionSynchronizer:u,selectedNodeId:d,hoveredNodeId:g,isMinimap:j})=>c.useMemo(()=>t.jsxs(C,{camera:{position:[0,0,70],fov:45,near:1,far:200},gl:{powerPreference:"default",antialias:!1,precision:"lowp",logarithmicDepthBuffer:!1,stencil:!1,alpha:!0,preserveDrawingBuffer:!0,failIfMajorPerformanceCaveat:!1},onCreated:({gl:h})=>{console.log("[ThreeJS] WebGL context created");const i=h.getContext();i&&i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,i.NONE),s&&s(h)},performance:{min:.5},frameloop:"demand",dpr:[.5,1],children:[t.jsx("color",{attach:"background",args:[131593]}),t.jsx("fog",{attach:"fog",args:[131593,30,80]}),t.jsx(D,{}),t.jsx("ambientLight",{intensity:.2}),t.jsx("directionalLight",{position:[10,10,10],intensity:.8,color:new f(16777215)}),t.jsx("pointLight",{position:[0,10,0],intensity:.5,color:new f(8939263)}),t.jsx("pointLight",{position:[-10,-10,-10],intensity:.3,color:new f(6719743)}),t.jsx(w,{ref:l,nodes:r,nodePositions:e,connections:v(o),isInitialChoicePhase:m,triumvirateActive:x,triumvirateNodes:p,positionSynchronizer:u}),t.jsx(S,{connections:a,nodePositions:e,positionSynchronizer:u,selectedNodeId:d,hoveredNodeId:g,isMinimap:j}),t.jsx(O,{onWebGLError:n}),t.jsx(B,{}),t.jsx(R,{}),t.jsx(b,{enableDamping:!0,dampingFactor:.05,rotateSpeed:.5,minDistance:50,maxDistance:120,enableZoom:!0,zoomSpeed:.5,enablePan:!0,panSpeed:.5,maxPolarAngle:Math.PI,minPolarAngle:0})]}),[r,e,o,a,l,m,x,p,s,n,u,d,g,j]),D=()=>t.jsx(L,{radius:50,depth:25,count:1e3,factor:3,saturation:.2,fade:!0,speed:.1}),R=()=>null;export{_ as default};
//# sourceMappingURL=ThreeJSComponents-vNT77-RA.js.map
