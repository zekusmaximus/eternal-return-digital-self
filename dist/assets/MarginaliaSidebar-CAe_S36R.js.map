{"version":3,"file":"MarginaliaSidebar-CAe_S36R.js","sources":["../../src/components/NodeView/MarginaliaSidebar.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { StrangeAttractor } from '../../types';\r\nimport { engageAttractor } from '../../store/slices/readerSlice';\r\nimport './NodeView.css';\r\n\r\ninterface MarginaliaSidebarProps {\r\n  nodeId: string;\r\n  strangeAttractors: StrangeAttractor[];\r\n}\r\n\r\n/**\r\n * Sidebar component that displays marginalia related to the current node,\r\n * including strange attractors, connections, and meta-narrative elements\r\n */\r\nconst MarginaliaSidebar: React.FC<MarginaliaSidebarProps> = ({ \r\n  nodeId, \r\n  strangeAttractors \r\n}) => {\r\n  const dispatch = useDispatch();\r\n  const [visible, setVisible] = useState(false);\r\n  const [notes, setNotes] = useState<string[]>([]);\r\n  \r\n  // Toggle sidebar visibility\r\n  const toggleSidebar = () => {\r\n    setVisible(!visible);\r\n  };\r\n  \r\n  // Handle engagement with an attractor\r\n  const handleAttractorClick = (attractor: StrangeAttractor) => {\r\n    dispatch(engageAttractor(attractor));\r\n    \r\n    // Add a note based on the attractor\r\n    // In a real implementation, this would be more sophisticated\r\n    addNote(`Engaged with ${formatAttractorName(attractor)}`);\r\n  };\r\n  \r\n  // Format attractor name for display\r\n  const formatAttractorName = (attractor: StrangeAttractor): string => {\r\n    return attractor\r\n      .replace(/-/g, ' ')\r\n      .split(' ')\r\n      .map(word => word.charAt(0).toUpperCase() + word.slice(1))\r\n      .join(' ');\r\n  };\r\n  \r\n  // Add a note to the marginalia\r\n  const addNote = (note: string) => {\r\n    setNotes(prev => [note, ...prev].slice(0, 10)); // Keep last 10 notes\r\n  };\r\n  \r\n  // Initial sidebar content based on node\r\n  useEffect(() => {\r\n    if (nodeId) {\r\n      // Add initial note based on node ID\r\n      addNote(`Viewing node: ${nodeId}`);\r\n    }\r\n  }, [nodeId]);\r\n  \r\n  return (\r\n    <div className={`marginalia-sidebar ${visible ? 'visible' : ''}`}>\r\n      <div className=\"marginalia-toggle\" onClick={toggleSidebar}>\r\n        {visible ? '›' : '‹'}\r\n      </div>\r\n      \r\n      <div className=\"marginalia-content\">\r\n        <h3 className=\"marginalia-header\">Strange Attractors</h3>\r\n        <div className=\"strange-attractors-list\">\r\n          {strangeAttractors.map(attractor => (\r\n            <div \r\n              key={attractor}\r\n              className=\"strange-attractor-item\"\r\n              onClick={() => handleAttractorClick(attractor)}\r\n            >\r\n              {formatAttractorName(attractor)}\r\n            </div>\r\n          ))}\r\n        </div>\r\n        \r\n        <h3 className=\"marginalia-header\">Reader Notes</h3>\r\n        <div className=\"reader-notes\">\r\n          {notes.map((note, index) => (\r\n            <div key={index} className=\"reader-note\">\r\n              {note}\r\n              <div className=\"reader-note-timestamp\">\r\n                {new Date().toLocaleTimeString()}\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MarginaliaSidebar;"],"names":["MarginaliaSidebar","nodeId","strangeAttractors","dispatch","useDispatch","visible","setVisible","useState","notes","setNotes","toggleSidebar","handleAttractorClick","attractor","engageAttractor","addNote","formatAttractorName","word","note","prev","useEffect","jsx","jsxs","index"],"mappings":"qLAeA,MAAMA,EAAsD,CAAC,CAC3D,OAAAC,EACA,kBAAAC,CACF,IAAM,CACJ,MAAMC,EAAWC,EAAY,EACvB,CAACC,EAASC,CAAU,EAAIC,EAAAA,SAAS,EAAK,EACtC,CAACC,EAAOC,CAAQ,EAAIF,EAAAA,SAAmB,CAAA,CAAE,EAGzCG,EAAgB,IAAM,CAC1BJ,EAAW,CAACD,CAAO,CACrB,EAGMM,EAAwBC,GAAgC,CACnDT,EAAAU,EAAgBD,CAAS,CAAC,EAInCE,EAAQ,gBAAgBC,EAAoBH,CAAS,CAAC,EAAE,CAC1D,EAGMG,EAAuBH,GACpBA,EACJ,QAAQ,KAAM,GAAG,EACjB,MAAM,GAAG,EACT,IAAYI,GAAAA,EAAK,OAAO,CAAC,EAAE,cAAgBA,EAAK,MAAM,CAAC,CAAC,EACxD,KAAK,GAAG,EAIPF,EAAWG,GAAiB,CACvBR,EAAAS,GAAQ,CAACD,EAAM,GAAGC,CAAI,EAAE,MAAM,EAAG,EAAE,CAAC,CAC/C,EAGAC,OAAAA,EAAAA,UAAU,IAAM,CACVlB,GAEMa,EAAA,iBAAiBb,CAAM,EAAE,CACnC,EACC,CAACA,CAAM,CAAC,SAGR,MAAI,CAAA,UAAW,sBAAsBI,EAAU,UAAY,EAAE,GAC5D,SAAA,CAAAe,EAAAA,IAAC,OAAI,UAAU,oBAAoB,QAASV,EACzC,SAAAL,EAAU,IAAM,GACnB,CAAA,EAEAgB,EAAAA,KAAC,MAAI,CAAA,UAAU,qBACb,SAAA,CAACD,EAAA,IAAA,KAAA,CAAG,UAAU,oBAAoB,SAAkB,qBAAA,QACnD,MAAI,CAAA,UAAU,0BACZ,SAAAlB,EAAkB,IACjBU,GAAAQ,EAAA,IAAC,MAAA,CAEC,UAAU,yBACV,QAAS,IAAMT,EAAqBC,CAAS,EAE5C,WAAoBA,CAAS,CAAA,EAJzBA,CAMR,CAAA,EACH,EAECQ,EAAA,IAAA,KAAA,CAAG,UAAU,oBAAoB,SAAY,eAAA,EAC7CA,EAAA,IAAA,MAAA,CAAI,UAAU,eACZ,SAAMZ,EAAA,IAAI,CAACS,EAAMK,IAChBD,EAAAA,KAAC,MAAgB,CAAA,UAAU,cACxB,SAAA,CAAAJ,EACDG,MAAC,OAAI,UAAU,wBACZ,aAAI,OAAO,oBACd,CAAA,CAAA,CAJQ,EAAAE,CAKV,CACD,CACH,CAAA,CAAA,CACF,CAAA,CAAA,EACF,CAEJ"}