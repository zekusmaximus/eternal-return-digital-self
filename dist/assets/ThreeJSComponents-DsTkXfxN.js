import{j as e,b as E,C as m,O as h,c as j,d as p}from"./three-vendor-BSwpqFLI.js";import{N as v,C as b}from"./node-view-CX8ZmfD4.js";import{b as l}from"./react-vendor-DaKsb8LL.js";import"./constellation-DYOcMIlB.js";const L=t=>t.map(r=>({start:r.source,end:r.target})),C=()=>{const{gl:t}=p(),[r,o]=l.useState(!1);return l.useEffect(()=>{if(!t.domElement)return;const s=n=>{console.error("[ThreeJS] WebGL context lost",n),o(!0),n.preventDefault()},a=n=>{console.log("[ThreeJS] WebGL context restored",n),o(!1)};return t.domElement.addEventListener("webglcontextlost",s),t.domElement.addEventListener("webglcontextrestored",a),()=>{t.domElement.removeEventListener("webglcontextlost",s),t.domElement.removeEventListener("webglcontextrestored",a)}},[t]),r?e.jsx("group",{children:e.jsxs("mesh",{position:[0,0,-5],children:[e.jsx("planeGeometry",{args:[10,2]}),e.jsx("meshBasicMaterial",{color:"red",transparent:!0,opacity:.8})]})}):null},w=()=>{const{gl:t}=p(),r=l.useRef(null);return l.useEffect(()=>{try{t.getContext().getExtension("WEBGL_lose_context")}catch(o){console.warn("[ThreeJS] Could not get WebGL extension:",o)}return r.current&&(clearInterval(r.current),r.current=null),()=>{r.current&&(clearInterval(r.current),r.current=null)}},[t]),null},N=({nodes:t,nodePositions:r,connections:o,mappedConnections:s,instancedMeshRef:a,onWebGLContextCreated:n,onWebGLError:i,isInitialChoicePhase:f,positionSynchronizer:u})=>l.useMemo(()=>e.jsxs(E,{camera:{position:[0,0,70],fov:45,near:1,far:200},gl:{powerPreference:"default",antialias:!1,precision:"lowp",logarithmicDepthBuffer:!1,stencil:!1,alpha:!0,preserveDrawingBuffer:!0,failIfMajorPerformanceCaveat:!1},onCreated:({gl:d})=>{console.log("[ThreeJS] WebGL context created");const c=d.getContext();c&&c.pixelStorei(c.UNPACK_COLORSPACE_CONVERSION_WEBGL,c.NONE),n&&n(d);const x=d.domElement;x.addEventListener("webglcontextlost",g=>{console.error("[ThreeJS] WebGL context lost event triggered"),g.preventDefault(),i&&i(new Error("WebGL context lost"))}),x.addEventListener("webglcontextrestored",()=>{console.log("[ThreeJS] WebGL context restored")})},performance:{min:.5},frameloop:"demand",dpr:[.5,1],children:[e.jsx("color",{attach:"background",args:[131593]}),e.jsx("fog",{attach:"fog",args:[131593,30,80]}),e.jsx(S,{}),e.jsx("ambientLight",{intensity:.2}),e.jsx("directionalLight",{position:[10,10,10],intensity:.8,color:new m(16777215)}),e.jsx("pointLight",{position:[0,10,0],intensity:.5,color:new m(8939263)}),e.jsx("pointLight",{position:[-10,-10,-10],intensity:.3,color:new m(6719743)}),e.jsx(v,{ref:a,nodes:t,nodePositions:r,connections:L(o),isInitialChoicePhase:f,positionSynchronizer:u}),e.jsx(b,{connections:s,nodePositions:r,positionSynchronizer:u}),e.jsx(C,{}),e.jsx(w,{}),e.jsx(O,{}),e.jsx(h,{enableDamping:!0,dampingFactor:.05,rotateSpeed:.5,minDistance:50,maxDistance:120,enableZoom:!0,zoomSpeed:.5,enablePan:!0,panSpeed:.5,maxPolarAngle:Math.PI,minPolarAngle:0})]}),[t,r,o,s,a,f,n,i,u]),S=()=>e.jsx(j,{radius:50,depth:25,count:1e3,factor:3,saturation:.2,fade:!0,speed:.1}),O=()=>null;export{N as default};
//# sourceMappingURL=ThreeJSComponents-DsTkXfxN.js.map
